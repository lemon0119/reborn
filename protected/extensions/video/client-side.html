<!DOCTYPE html> 
<html>
<head>
    <style>
        body{
            background-color: #ffffff;
        }
    </style>
</head> 
<body> 

<div style="text-align:center"> 
  
 
	<video id="video1">
		<source src="1.MP4">
		    Your browser does not support HTML5 video.
	</video>
	 <br>
	 
	<button onclick="WebSocketTest()" >连接</button> 
	<button onclick="" id="send">播放/暂停</button> 

</div> 

<script> 
var myVideo=document.getElementById("video1"); 
var connection = 0;

function WebSocketTest()
  {
     if (connection==1){ //cheching is there is a live connection so we do not spam the server.
     	document.getElementById('chatlog').innerHTML += '<br> You are already connected!';
     }else{//if there is not live connection we create one
     	var ws = new WebSocket("ws://192.168.101.235:8000",'echo-protocol');// initializing the connection through the websocket api
		ws.onopen = function() //creating the connection
		{
			connection = 1;
			send.addEventListener("click", function(event) {//sending order to the server to play or pause
				var message_sent = "Play/Pause";
				ws.send(message_sent); //sending the order message to the server
				document.getElementById('log').innerHTML += '<br><span style="color:green;"> Client->Server:' + message_sent;
				
			});	
		};

		ws.addEventListener("message", function(e) //waiting to receive a message from the server
		{
			var msg = e.data; //put the received message in a variable
			if (msg == "Play/Pause"){ //checking if it is a play/pause order
			    playPause();
			}else{
			    document.getElementById('log').innerHTML += '<br><span style="color:red;">Server:' + msg +'</span>';
			}
		});

		ws.onclose = function(event) { alert("Connection closed."); };
	}
};
	
function playPause() //checking if the video is playing. if it is we pause it if not we play it.
{ 
	if (myVideo.paused){

	  myVideo.play(); 
	  document.getElementById('log').innerHTML += '<br><span style="color:red;"><!--Server: Play--></span>';
	   
	}else {
	  myVideo.pause();
	  document.getElementById('log').innerHTML += '<br><span style="color:red;"><!--Server: Pause--></span>'; 
	} 
};

</script> 

<div >
   <!--
	<h1>Orders:</h1>
   -->
  <!--
   <div align = "center" id = "log"></div>
  -->
</div>
</body> 
</html>
